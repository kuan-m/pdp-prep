## [На главную](../../README.md)
# Тесты производительности OPcache и JIT

Этот раздел содержит тесты для сравнения производительности PHP с различными конфигурациями OPcache и JIT.

## Структура тестов

### 1. Арифметика (`fibonacci.php`)
Тест вычисления чисел Фибоначчи различными алгоритмами:
- Итеративный алгоритм
- Матричный алгоритм (оптимизированный)
- Рекурсивный алгоритм (для малых значений)


### 2. I/O операции (`file_operations.php`)
Тест производительности операций с файлами:
- Запись файлов
- Чтение файлов
- Смешанные операции (чтение + запись)
- Работа с большими файлами

### 3. JSON операции (`json_operations.php`)
Тест производительности операций с JSON:
- Кодирование (encode)
- Декодирование (decode)
- Полный цикл (encode + decode)
- Работа с большими JSON структурами
- Множественные операции

**Параметры:**
- `size` - количество элементов в данных (по умолчанию: 1000)
- `iterations` - количество итераций (по умолчанию: 100)

### 4. Матричные операции (`matrix_operations.php`)
Тест производительности матричных операций:
- Умножение матриц (O(n³))
- Транспонирование (O(n²))
- Сложение матриц (O(n²))
- Вычисление детерминанта (O(n!))

**Параметры:**
- `size` - размер матрицы NxN (по умолчанию: 100)
- `iterations` - количество итераций (по умолчанию: 10)

**Особенности:**
- Много вложенных циклов - идеально для JIT
- Чистый PHP код без нативных функций
- Должен показать значительную разницу между конфигурациями

### 5. Обработка строк (`string_processing.php`)
Тест производительности операций со строками:
- Подсчет вхождений подстроки (без strpos)
- Замена символов в цикле
- Подсчет слов
- Реверс строки (без strrev)
- Удаление дубликатов
- Подсчет частоты символов

**Параметры:**
- `size` - длина текста в символах (по умолчанию: 10000)
- `iterations` - количество итераций (по умолчанию: 100)

**Особенности:**
- Множество циклов по символам строк
- Чистый PHP код без использования нативных функций
- Должен показать разницу между конфигурациями



## Формат результатов
Все тесты возвращают JSON с следующей структурой:
```json
{
  "test": "Название теста",
  "parameters": {
    "параметр1": "значение1"
  },
  "results": {
    "название_теста": {
      "result": "результат",
      "time_ms": "время в миллисекундах",
      "throughput_mb_per_sec": "пропускная способность"
    }
  },
  "performance": {
    "total_time_ms": "общее время",
    "memory_used_mb": "использованная память"
  },
  "php_config": {
    "opcache_enabled": "yes/no",
    "jit_enabled": "yes/no",
    "jit_buffer_size": "размер буфера",
    "jit_mode": "режим JIT"
  }
}
```

## Ожидаемые результаты

- **OPcache + JIT**: должен показать лучшую производительность на арифметических операциях
- **OPcache only**: должен показать хорошую производительность на всех операциях
- **No OPcache**: должен показать наихудшую производительность

