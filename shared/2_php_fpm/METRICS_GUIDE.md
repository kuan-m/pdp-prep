# Руководство по метрикам autocannon

### Default (pm=static, max_children=5)
- **Latency avg**: 239.84 ms
- **Latency p99**: 287 ms
- **Req/Sec avg**: 417.1 req/sec
- **Total requests**: 13k за 30 секунд

### Aggressive (pm=dynamic, max_children=50)
- **Latency avg**: 125.16 ms
- **Latency p99**: 196 ms
- **Req/Sec avg**: 799 req/sec
- **Total requests**: 24k за 30 секунд

---

## На что обращать внимание в выводах autocannon

### 1. Latency (Задержка) - САМОЕ ВАЖНОЕ

```
┌─────────┬───────┬───────┬────────┬────────┬───────────┬──────────┬────────┐
│ Stat    │ 2.5%  │ 50%   │ 97.5%  │ 99%    │ Avg       │ Stdev    │ Max    │
├─────────┼───────┼───────┼────────┼────────┼───────────┼──────────┼────────┤
│ Latency │ 91 ms │ 99 ms │ 193 ms │ 196 ms │ 125.16 ms │ 44.19 ms │ 516 ms │
└─────────┴───────┴───────┴────────┴────────┴───────────┴──────────┴────────┘
```

#### Что это значит:
- **Latency** - время от отправки запроса до получения ответа

#### Ключевые метрики:

1. **50% (медиана)** - время ответа для половины запросов
   - ✅ **Хорошо**: < 100ms
   - ⚠️ **Приемлемо**: 100-500ms
   - ❌ **Плохо**: > 500ms
   - **Результат**: Default: 276ms, Aggressive: 99ms ✅

2. **99% (p99)** - время ответа для 99% запросов
   - Показывает худшие случаи
   - ✅ **Хорошо**: < 200ms
   - ⚠️ **Приемлемо**: 200-1000ms
   - ❌ **Плохо**: > 1000ms
   - **Результат**: Default: 287ms, Aggressive: 196ms ✅

3. **Avg (среднее)** - среднее время ответа
   - Полезно для общего понимания
   - **Результат**: Default: 239.84ms, Aggressive: 125.16ms ✅

4. **Stdev (стандартное отклонение)** - разброс значений
   - Меньше = стабильнее
   - **Результат**: Default: 46.84ms, Aggressive: 44.19ms (почти одинаково)

5. **Max** - максимальное время ответа
   - Показывает выбросы (может быть из-за холодного старта, GC и т.д.)
   - **Результат**: Default: 636ms, Aggressive: 516ms

#### Что искать:
- ✅ **Низкая latency** = быстрый ответ
- ✅ **Маленький разброс (Stdev)** = стабильная производительность
- ✅ **Низкий p99** = большинство запросов обрабатываются быстро

---

### 2. Req/Sec (Requests per Second) - ПРОПУСКНАЯ СПОСОБНОСТЬ

```
┌───────────┬────────┬────────┬────────┬────────┬────────┬─────────┬────────┐
│ Stat      │ 1%     │ 2.5%   │ 50%    │ 97.5%  │ Avg    │ Stdev   │ Min    │
├───────────┼────────┼────────┼────────┼────────┼────────┼─────────┼────────┤
│ Req/Sec   │ 382    │ 382    │ 415    │ 449    │ 417,1  │ 19,76   │ 382    │
└───────────┴────────┴────────┴────────┴────────┴────────┴─────────┴────────┘
```

#### Что это значит:
- **Req/Sec** - сколько запросов обрабатывается в секунду

#### Ключевые метрики:

1. **Avg (среднее)** - средняя пропускная способность
   - Чем выше, тем лучше
   - **Результат**: Default: 417 req/sec, Aggressive: 799 req/sec
   - **Вывод**: Aggressive в **1.9 раза быстрее** ✅

2. **50% (медиана)** - типичная пропускная способность
   - **Результат**: Default: 415 req/sec, Aggressive: 789 req/sec

3. **Min/Max** - минимальная/максимальная пропускная способность
   - Показывает стабильность
   - **Результат**: Default: 382-449 req/sec, Aggressive: 627-865 req/sec

#### Что искать:
- ✅ **Высокий Req/Sec** = больше запросов обрабатывается
- ✅ **Стабильный Req/Sec** (маленький Stdev) = постоянная производительность
- ✅ **Высокий Min** = даже в худшие моменты производительность хорошая

---

### 3. Bytes/Sec (Пропускная способность данных)

```
│ Bytes/Sec │ 139 kB │ 139 kB │ 151 kB │ 164 kB │ 152 kB │ 7.21 kB │ 139 kB │
```

#### Что это значит:
- Сколько данных передается в секунду

#### Когда это важно:
- Для больших ответов (файлы, изображения)
- Для Ро теста не критично (JSON ответы маленькие)

---

### 4. Total requests (Общее количество запросов)

```
# of samples: 30
13k requests in 30.25s, 4.56 MB read
```

#### Результат:
- **Default**: 13k запросов за 30.25 секунд
- **Aggressive**: 24k запросов за 30.26 секунд
- **Разница**: Aggressive обработал в **1.85 раза больше** запросов ✅

---

## Сравнение результатов

| Метрика | Default | Aggressive | Разница | Оценка |
|---------|---------|------------|---------|--------|
| **Latency avg** | 239.84 ms | 125.16 ms | **-48%** | ✅ Aggressive быстрее |
| **Latency p99** | 287 ms | 196 ms | **-32%** | ✅ Aggressive стабильнее |
| **Req/Sec avg** | 417 req/sec | 799 req/sec | **+92%** | ✅ Aggressive в 1.9x быстрее |
| **Total requests** | 13k | 24k | **+85%** | ✅ Aggressive обработал больше |
| **Stdev (Latency)** | 46.84 ms | 44.19 ms | -6% | ≈ Одинаковая стабильность |

---



